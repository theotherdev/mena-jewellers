{% comment %}
  This section is used in the blog template to render the blog page listing all
  articles within a blog.

  https://shopify.dev/docs/storefronts/themes/architecture/templates/blog
{% endcomment %}

<div class="blog-section">
  <h1>{{ blog.title }}</h1>

  {% paginate blog.articles by 5 %}
  {% for article in blog.articles %}
    <div>
      {% if article.image %}
        {% liquid
          # First article image uses eager loading for LCP optimization
          if forloop.first
            assign image_loading = 'eager'
            assign image_fetchpriority = 'high'
          else
            assign image_loading = 'lazy'
            assign image_fetchpriority = 'auto'
          endif
        %}
        {% render 'image',
          image: article.image,
          width: 1200,
          loading: image_loading,
          fetchpriority: image_fetchpriority,
          srcset: true,
          sizes: '(min-width: 768px) 50vw, 100vw'
        %}
      {% endif %}
      <h2>
        {{ article.title | link_to: article.url }}
      </h2>
      {% assign date = article.published_at | time_tag: format: 'date' %}
      <p>{{ 'blog.article_metadata_html' | t: date: date, author: article.author }}</p>
      <p>{{ article.excerpt }}</p>
    </div>
  {% endfor %}

  {%- if paginate.pages > 1 -%}
    {{- paginate | default_pagination -}}
  {%- endif -%}
  {% endpaginate %}
</div>

{% stylesheet %}
  .blog-section {
    padding-top: 60px;
  }

  @media (min-width: 768px) {
    .blog-section {
      padding-top: 68px;
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "t:general.blog",
  "settings": []
}
{% endschema %}
