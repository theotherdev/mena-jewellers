class LazyImageLoader{constructor(){this.images=document.querySelectorAll(".image--lazy img"),this.observer=null,this.init()}init(){"IntersectionObserver"in window?this.setupObserver():this.loadAllImages()}setupObserver(){this.observer=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(this.loadImage(e.target),this.observer.unobserve(e.target))})},{rootMargin:"100px 0px",threshold:.01}),this.images.forEach(e=>{e.complete&&0!==e.naturalHeight?this.showImage(e):this.observer.observe(e)})}loadImage(e){e.dataset.src&&(e.src=e.dataset.src),e.dataset.srcset&&(e.srcset=e.dataset.srcset),e.complete?this.showImage(e):(e.addEventListener("load",()=>this.showImage(e),{once:!0}),e.addEventListener("error",()=>this.showImage(e),{once:!0}))}showImage(e){e.classList.add("loaded"),e.classList.remove("opacity-0")}loadAllImages(){this.images.forEach(e=>this.loadImage(e))}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>new LazyImageLoader):new LazyImageLoader;